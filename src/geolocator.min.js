/* Geolocator v.0.95 https://github.com/onury/geolocator */
var geolocator=function(){function m(a,b,e){var c=document.createElement("script");c.type="undefined"===typeof e?"text/javascript":e;b&&(c.readyState?c.onreadystatechange=function(){if("loaded"==c.readyState||"complete"==c.readyState)c.onreadystatechange=null,b()}:c.onload=function(){b()});c.src=a;document.getElementsByTagName("head")[0].appendChild(c)}function p(a){function b(){geolocator.__glcb&&delete geolocator.__glcb;google.load("maps","3",{other_params:"sensor=false",callback:a})}"undefined"!==
typeof google&&"undefined"!==typeof google.maps?a&&a():"undefined"!==typeof google&&"undefined"!==typeof google.loader?b():(geolocator.__glcb=b,m(t+"?callback=geolocator.__glcb"))}function u(a,b,e){if(a=document.getElementById(a)){var c=new google.maps.Map(a,b),f=new google.maps.Marker({position:b.center,map:c}),d=new google.maps.InfoWindow;d.setContent(e);google.maps.event.addListener(f,"click",function(){d.open(c,f)});geolocator.location.map={canvas:a,map:c,options:b,marker:f,infoWindow:d}}else geolocator.location.map=
null}function v(a,b){(new google.maps.Geocoder).geocode({latLng:a},function(a,c){c==google.maps.GeocoderStatus.OK&&b&&b(a)})}function q(a){var b=new google.maps.LatLng(a.latitude,a.longitude);v(b,function(a){if(0<a.length&&0<a.length){geolocator.location.formattedAddress=a[0].formatted_address;for(var c=a[0].address_components,f=0;f<c.length;f++){var d=c[f];0<=d.types.indexOf("route")?geolocator.location.address.street=d.long_name:0<=d.types.indexOf("neighborhood")?geolocator.location.address.neighborhood=
d.long_name:0<=d.types.indexOf("sublocality")?geolocator.location.address.town=d.long_name:0<=d.types.indexOf("locality")?geolocator.location.address.city=d.long_name:0<=d.types.indexOf("administrative_area_level_1")?geolocator.location.address.region=d.long_name:0<=d.types.indexOf("country")?(geolocator.location.address.country=d.long_name,geolocator.location.address.countryCode=d.short_name):0<=d.types.indexOf("postal_code")?geolocator.location.address.postalCode=d.long_name:0<=d.types.indexOf("street_number")&&
(geolocator.location.address.streetNumber=d.long_name)}}u(l,{zoom:null===geolocator.location.ipGeoSource?14:7,center:b,mapTypeId:"roadmap"},a[0].formatted_address);h&&h.call(null,geolocator.location)})}function w(a,b){function e(a){geolocator.location={ipGeoSource:null,coords:a.coords,timestamp:(new Date).getTime(),address:{}};q(geolocator.location.coords)}function c(a){f(a.message)}function f(b){var c=!0===a?0:"number"===typeof a?a:-1;0<=c?geolocator.locateByIP(h,g,c,l):g&&g.call(null,b)}geolocator.location=
null;navigator.geolocation?navigator.geolocation.getCurrentPosition(e,c,b):f("geolocation is not supported.")}function r(a){var b=!1;geolocator.location=null;delete geolocator.__ipscb;p(function(){2===k?"undefined"!==typeof window.Geo&&(s(k,window.Geo),delete window.Geo,b=!0):"undefined"!==typeof a&&(s(k,a),b=!0);!0===b?q(geolocator.location.coords):g&&g("Could not get location.")})}function s(a,b){switch(a){case 0:geolocator.location={coords:{latitude:b.latitude,longitude:b.longitude},address:{city:b.city,
country:b.country_name,countryCode:b.country_code,region:b.region_name}};break;case 1:geolocator.location={coords:{latitude:b.geoplugin_latitude,longitude:b.geoplugin_longitude},address:{city:b.geoplugin_city,country:b.geoplugin_countryName,countryCode:b.geoplugin_countryCode,region:b.geoplugin_regionName}};break;case 2:geolocator.location={coords:{latitude:b.lat,longitude:b.lon},address:{city:b.city,country:"",countryCode:b.country,region:""}}}geolocator.location&&(geolocator.location.coords.accuracy=
null,geolocator.location.coords.altitude=null,geolocator.location.coords.altitudeAccuracy=null,geolocator.location.coords.heading=null,geolocator.location.coords.speed=null,geolocator.location.timestamp=(new Date).getTime(),geolocator.location.ipGeoSource=n[a],geolocator.location.ipGeoSource.data=b)}var h,g,l,t="https://www.google.com/jsapi",n=[{url:"http://freegeoip.net/json/",cbParam:"callback"},{url:"http://www.geoplugin.net/json.gp",cbParam:"jsoncallback"},{url:"http://geoiplookup.wikimedia.org/",
cbParam:""}],k=0;return{location:null,locate:function(a,b,e,c,f){h=a;g=b;l=f;p(function(){w(e,c)})},locateByIP:function(a,b,e,c){k="undefined"===typeof e||0>e||e>=n.length?0:e;h=a;g=b;l=c;geolocator.__ipscb=r;a=n[k];"undefined"===typeof a.cbParam||null===a.cbParam||""===a.cbParam?m(a.url,r):m(a.url+"?"+a.cbParam+"=geolocator.__ipscb")}}}();
