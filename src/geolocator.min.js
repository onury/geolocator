/*
  Geolocator Javascript Lib v.1.2.6
  (c) 2014-2015 Onur Yildirim (onur@cutepilot.com)
  https://github.com/onury/geolocator
  MIT License
*/
var geolocator=function(){"use strict";function u(e,n,r){function s(e,t){if(r&&i.parentNode){i.parentNode.removeChild(i)}if(typeof e==="function"){e(t)}}var i=document.createElement("script");i.async=true;if(i.readyState){i.onreadystatechange=function(e){if(i.readyState==="loaded"||i.readyState==="complete"){i.onreadystatechange=null;s(n)}}}else{i.onload=function(e){s(n)}}i.onerror=function(n){var r="Could not load source at "+String(e).replace(/\?.*$/,"");s(t,new Error(r))};i.src=e;document.getElementsByTagName("head")[0].appendChild(i)}function a(e){function t(){if(geolocator.__glcb){delete geolocator.__glcb}google.load("maps","3.15",{other_params:"sensor=false",callback:e})}if(window.google!==undefined&&google.maps!==undefined){if(e){e()}}else{if(window.google!==undefined&&google.loader!==undefined){t()}else{geolocator.__glcb=t;u(r+"?callback=geolocator.__glcb")}}}function f(e,t,n){var r,i,s,o=document.getElementById(e);if(o){r=new google.maps.Map(o,t);i=new google.maps.Marker({position:t.center,map:r});s=new google.maps.InfoWindow;s.setContent(n);google.maps.event.addListener(i,"click",function(){s.open(r,i)});geolocator.location.map={canvas:o,map:r,options:t,marker:i,infoWindow:s}}else{geolocator.location.map=null}}function l(e,t){function r(e,n){if(n===google.maps.GeocoderStatus.OK){if(t){t(e)}}}var n=new google.maps.Geocoder;n.geocode({latLng:e},r)}function c(e){if(e&&e.length>0){var t,n,r={},i=e[0].address_components;for(t=0;t<i.length;t+=1){n=i[t];if(n.types&&n.types.length>0){r[n.types[0]]=n.long_name;r[n.types[0]+"_s"]=n.short_name}}geolocator.location.formattedAddress=e[0].formatted_address;geolocator.location.address={street:r.route||"",neighborhood:r.neighborhood||"",town:r.sublocality||"",city:r.locality||"",region:r.administrative_area_level_1||"",country:r.country||"",countryCode:r.country_s||"",postalCode:r.postal_code||"",streetNumber:r.street_number||""}}}function h(t){c(t);var r=geolocator.location;var i=r.ipGeoSource===null?14:7,s={zoom:i,center:new google.maps.LatLng(r.coords.latitude,r.coords.longitude),mapTypeId:"roadmap"};f(n,s,t[0].formatted_address);if(e){e.call(null,r)}}function p(e){l(new google.maps.LatLng(e.latitude,e.longitude),h)}function d(r,i){function s(i){var s=r===true?0:typeof r==="number"?r:-1;if(s>=0){geolocator.locateByIP(e,t,s,n)}else{if(t){t(i)}}}function o(e){geolocator.location={ipGeoSource:null,coords:e.coords};b();p(geolocator.location.coords)}function u(e){s(e)}geolocator.location=null;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(o,u,i)}else{s(new Error("geolocation is not supported."))}}function v(e,t){switch(e){case 0:geolocator.location={coords:{latitude:t.latitude,longitude:t.longitude},address:{city:t.city,country:t.country_name,countryCode:t.country_code,region:t.region_name}};break;case 1:geolocator.location={coords:{latitude:t.geoplugin_latitude,longitude:t.geoplugin_longitude},address:{city:t.geoplugin_city,country:t.geoplugin_countryName,countryCode:t.geoplugin_countryCode,region:t.geoplugin_regionName}};break;case 2:geolocator.location={coords:{latitude:t.lat,longitude:t.lon},address:{city:t.city,country:"",countryCode:t.country,region:""}};break}if(geolocator.location){y();b();geolocator.location.ipGeoSource=i[e];geolocator.location.ipGeoSource.data=t}}function m(e){function r(){if(o===2){if(window.Geo!==undefined){v(o,window.Geo);delete window.Geo;n=true}}else{if(e!==undefined&&typeof e!=="string"){v(o,e);n=true}}if(n===true){p(geolocator.location.coords)}else{if(t){t(new Error(e||"Could not get location."))}}}var n=false;geolocator.location=null;delete geolocator.__ipscb;a(r)}function g(e){if(e.cbParam===undefined||e.cbParam===null||e.cbParam===""){u(e.url,m,true)}else{u(e.url+"?"+e.cbParam+"=geolocator.__ipscb",undefined,true)}}function y(){geolocator.location.coords.accuracy=null;geolocator.location.coords.altitude=null;geolocator.location.coords.altitudeAccuracy=null;geolocator.location.coords.heading=null;geolocator.location.coords.speed=null}function b(){geolocator.location.timestamp=(new Date).getTime()}function w(e){var n=new google.maps.Geocoder;n.geocode({address:e},function(e,n){if(n===google.maps.GeocoderStatus.OK){var r=e[0].geometry.location;geolocator.location={ipGeoSource:null,coords:{latitude:r.lat,longitude:r.lng}};y();b();h(e)}else{if(t){t(new Error("Could not get location. Status:"+n))}}})}var e,t,n,r="https://www.google.com/jsapi",i=[{url:"http://freegeoip.net/json/",cbParam:"callback"},{url:"http://www.geoplugin.net/json.gp",cbParam:"jsoncallback"},{url:"http://geoiplookup.wikimedia.org/",cbParam:""}],s=1,o;return{location:null,locateByAddress:function(r,i,s,o){function u(){w(r)}e=i;t=s;n=o;a(u)},locate:function(r,i,s,o,u){function f(){d(s,o)}e=r;t=i;n=u;a(f)},locateByIP:function(r,u,a,f){o=typeof a!=="number"||a<0||a>=i.length?s:a;e=r;t=u;n=f;geolocator.__ipscb=m;g(i[o])},isPositionError:function(e){return Object.prototype.toString.call(e)==="[object PositionError]"}}}()